// app/javascript/item_price.js

window.addEventListener('turbo:load', () => {
  // ② 価格入力欄の要素を取得
  const priceInput = document.getElementById("item-price");
  if (!priceInput) return; // 価格入力がないページでは何もしない

  // ③ 手数料と利益を表示する要素を取得
  const addTaxPrice = document.getElementById("add-tax-price");
  const profit = document.getElementById("profit");

  // ④ 価格入力欄に「入力された瞬間」のイベントをつける
  priceInput.addEventListener("input", () => {
    // ⑤ 入力された文字を数値に変換
    const price = parseInt(priceInput.value, 10);

    // ⑥ 数字じゃないとき（空欄など）は表示を消す
    if (Number.isNaN(price)) {
      addTaxPrice.textContent = '';
      profit.textContent = '';
      return;
    }

    // ⑦ 手数料10％を計算（小数点切り捨て）
    const tax = Math.floor(price * 0.1);

    // ⑧ 利益を計算（価格 − 手数料）
    const gain = price - tax;

    // ⑨ 計算した値を画面に表示する
    addTaxPrice.textContent = tax;
    profit.textContent = gain;
  });
});
